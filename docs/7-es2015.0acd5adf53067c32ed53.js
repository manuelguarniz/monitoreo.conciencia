(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{x80o:function(t,e,c){"use strict";c.r(e),c.d(e,"AlertModule",(function(){return lt}));var a=c("Ku21"),r=c("3Pt+"),l=c("XKlN"),i=c("ofXK"),n=c("+0xr"),o=c("M9IT"),s=c("Dh3D"),u=c("tyNb");class d{constructor(t){this.alertId=null==t?void 0:t.alertId,this.firstName=null==t?void 0:t.firstName,this.lastName=null==t?void 0:t.lastName,this.email=null==t?void 0:t.email,this.jobTitle=null==t?void 0:t.jobTitle,this.phone=null==t?void 0:t.phone,this.ventilatorId=null==t?void 0:t.ventilatorId}}const b=["item","name","email","jobTitle","phone","ventilatorId","action"];var m=c("+2ru"),h=c("XNiG"),p=c("1G5W"),f=c("fXoL"),v=c("tk/3"),g=c("AytR"),w=c("LRne"),S=c("lJxs"),A=c("JIr8"),k=c("r2a4");let y=(()=>{class t{constructor(t,e){this.http=t,this.alertModalService=e}getAlertByHospital(t){const e=(new v.c).set("hospital_id",""+t);return this.http.get(g.a.API_URL+"api/alertas",{params:e}).pipe(Object(S.a)(t=>{let e=null;return 200===t.cod_respuesta&&(e=t.respuesta[0].alertas.map(t=>({alertId:t.alerta_id,firstName:t.nombres,lastName:t.apellidos,email:t.email,jobTitle:t.cargo,phone:t.telefono,ventilatorId:t.ventilador_id}))),e||[]}),Object(A.a)(t=>{var e;return 400===(null===(e=t.error)||void 0===e?void 0:e.cod_respuesta)?this.alertModalService.alert(m.a.error,t.error.mensaje):this.alertModalService.alert(m.a.error,t.message||t.error.message),console.error(t),Object(w.a)([])}))}getEmployeeAndVentilator(t){const e=(new v.c).set("hospital_id",""+t);return this.http.get(g.a.API_URL+"api/paciente-ventilador",{params:e}).pipe(Object(S.a)(t=>{const e={worker:[],ventilator:[]};if(200===t.cod_respuesta){const c=t.respuesta;e.worker=c[0].trabajadores.map(t=>({workerId:t.trabajadorId,workerName:t.nombres})),e.ventilator=c[1].ventiladores.map(t=>({ventilatorId:t,ventilatorName:t.toString()}))}return e||null}),Object(A.a)(t=>{var e;return 400===(null===(e=t.error)||void 0===e?void 0:e.cod_respuesta)?this.alertModalService.alert(m.a.error,t.error.mensaje):this.alertModalService.alert(m.a.error,t.message||t.error.message),console.error(t),Object(w.a)(null)}))}getDetailShortByVentilatorId(t){const e=(new v.c).set("ventilador_id",""+t);return this.http.get(g.a.API_URL+"api/detalle-corto-por-ventilador",{params:e}).pipe(Object(S.a)(t=>{let e=null;return 200===t.cod_respuesta&&(e=t.respuesta[0].detalle_ventilador),e||null}),Object(A.a)(t=>{var e;return 400===(null===(e=t.error)||void 0===e?void 0:e.cod_respuesta)?this.alertModalService.alert(m.a.error,t.error.mensaje):this.alertModalService.alert(m.a.error,t.message||t.error.message),console.error(t),Object(w.a)(null)}))}}return t.\u0275fac=function(e){return new(e||t)(f.gc(v.a),f.gc(k.a))},t.\u0275prov=f.Sb({token:t,factory:t.\u0275fac}),t})();var D=c("W+oY");const L=["paginatorAlert"],I=["sortAlert"];function N(t,e){1&t&&(f.ac(0),f.Lc(1," Cargando... "),f.Zb())}function C(t,e){1&t&&(f.cc(0,"mat-header-cell",32),f.Lc(1," Item "),f.bc())}function j(t,e){if(1&t&&(f.cc(0,"mat-cell"),f.Lc(1),f.bc()),2&t){const t=e.index;f.Kb(1),f.Nc(" ",t+1," ")}}function K(t,e){1&t&&(f.cc(0,"mat-header-cell",32),f.Lc(1," Nombre y Apellidos "),f.bc())}function O(t,e){if(1&t&&(f.cc(0,"mat-cell"),f.Lc(1),f.bc()),2&t){const t=e.$implicit;f.Kb(1),f.Oc(" ",t.firstName," ",t.lastName," ")}}function T(t,e){1&t&&(f.cc(0,"mat-header-cell",32),f.Lc(1," Email "),f.bc())}function B(t,e){if(1&t&&(f.cc(0,"mat-cell"),f.Lc(1),f.bc()),2&t){const t=e.$implicit;f.Kb(1),f.Nc(" ",t.email," ")}}function J(t,e){1&t&&(f.cc(0,"mat-header-cell",32),f.Lc(1," Cargo "),f.bc())}function M(t,e){if(1&t&&(f.cc(0,"mat-cell"),f.Lc(1),f.bc()),2&t){const t=e.$implicit;f.Kb(1),f.Nc(" ",t.jobTitle," ")}}function $(t,e){1&t&&(f.cc(0,"mat-header-cell",32),f.Lc(1," Tel\xe9fono "),f.bc())}function x(t,e){if(1&t&&(f.cc(0,"mat-cell"),f.Lc(1),f.bc()),2&t){const t=e.$implicit;f.Kb(1),f.Nc(" ",t.phone," ")}}function V(t,e){1&t&&(f.cc(0,"mat-header-cell",32),f.Lc(1," Ventilador Id "),f.bc())}function F(t,e){if(1&t&&(f.cc(0,"mat-cell"),f.Lc(1),f.bc()),2&t){const t=e.$implicit;f.Kb(1),f.Nc(" ",t.ventilatorId," ")}}function _(t,e){1&t&&(f.cc(0,"mat-header-cell"),f.Lc(1," Acci\xf3n "),f.bc())}function W(t,e){if(1&t){const t=f.dc();f.cc(0,"mat-cell"),f.cc(1,"button",33),f.kc("click",(function(){f.Dc(t);const c=e.$implicit;return f.oc(2).showDetail(c)})),f.Lc(2," Ver Detalles "),f.bc(),f.cc(3,"button",34),f.kc("click",(function(){f.Dc(t);const c=e.$implicit;return f.oc(2).deleteAlert(c)})),f.Lc(4," Eliminar "),f.bc(),f.bc()}2&t&&(f.Kb(3),f.Ic("margin-left",10,"px"))}function R(t,e){1&t&&f.Xb(0,"mat-header-row")}function X(t,e){1&t&&f.Xb(0,"mat-row")}function E(t,e){1&t&&(f.cc(0,"div",35),f.Lc(1," No hay data "),f.bc())}function H(t,e){if(1&t){const t=f.dc();f.cc(0,"div",0),f.cc(1,"div",9),f.cc(2,"div",10),f.cc(3,"span",11),f.Xb(4,"i",12),f.bc(),f.cc(5,"input",13),f.kc("keyup",(function(e){return f.Dc(t),f.oc().applyFilter(e)})),f.bc(),f.bc(),f.bc(),f.cc(6,"div",14),f.cc(7,"button",15),f.kc("click",(function(){return f.Dc(t),f.oc().newAlert()})),f.Lc(8," Nueva Alerta "),f.bc(),f.bc(),f.bc(),f.cc(9,"div",16),f.cc(10,"mat-table",17,18),f.ac(12,19),f.Jc(13,C,2,0,"mat-header-cell",20),f.Jc(14,j,2,1,"mat-cell",21),f.Zb(),f.ac(15,22),f.Jc(16,K,2,0,"mat-header-cell",20),f.Jc(17,O,2,2,"mat-cell",21),f.Zb(),f.ac(18,23),f.Jc(19,T,2,0,"mat-header-cell",20),f.Jc(20,B,2,1,"mat-cell",21),f.Zb(),f.ac(21,24),f.Jc(22,J,2,0,"mat-header-cell",20),f.Jc(23,M,2,1,"mat-cell",21),f.Zb(),f.ac(24,25),f.Jc(25,$,2,0,"mat-header-cell",20),f.Jc(26,x,2,1,"mat-cell",21),f.Zb(),f.ac(27,26),f.Jc(28,V,2,0,"mat-header-cell",20),f.Jc(29,F,2,1,"mat-cell",21),f.Zb(),f.ac(30,27),f.Jc(31,_,2,0,"mat-header-cell",28),f.Jc(32,W,5,2,"mat-cell",21),f.Zb(),f.Jc(33,R,1,0,"mat-header-row",29),f.Jc(34,X,1,0,"mat-row",30),f.bc(),f.bc(),f.Jc(35,E,2,0,"div",31)}if(2&t){const t=f.oc();f.Kb(10),f.uc("dataSource",t.dataSourceAlert),f.Kb(23),f.uc("matHeaderRowDef",t.displayedColumns),f.Kb(1),f.uc("matRowDefColumns",t.displayedColumns),f.Kb(1),f.uc("ngIf",!t.dataSourceAlert.data||0==t.dataSourceAlert.data.length)}}const Z=function(){return[5,10,15,25]};let P=(()=>{class t{constructor(t,e,c,a){this.router=t,this.alertService=e,this.titleNavbarService=c,this.alertModelService=a,this.loadingTable=!1,this.dataSourceAlert=new n.k([]),this.unsubscribe$=new h.a}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnInit(){this.titleNavbarService.setTitleNavbar("Alertas"),this.settingTable(),this.listAlert()}settingTable(){this.displayedColumns=b,this.dataSourceAlert.paginator=this.paginatorAlert,this.dataSourceAlert.sort=this.sortAlert}showDetail(t){this.router.navigate(["/alertas/detalle"])}deleteAlert(t){this.alertModelService.alertCustomConfirm(m.a.warning,{html:`Al eliminar la alerta no se notificar\xe1 al usuario: <strong>${t.firstName} ${t.lastName}</strong>.`,confirmButtonText:"Eliminar",confirmButtonColor:"#fa1825",cancelButtonText:"Cancelar"},"\xbfEst\xe1 seguro de eliminar la alerta?").pipe(Object(p.a)(this.unsubscribe$)).subscribe(t=>{t&&this.listAlert()})}newAlert(){this.router.navigate(["/alertas/crear"])}applyFilter(t){this.dataSourceAlert.filter=t.target.value.trim().toLowerCase()}listAlert(){this.loadingTable=!0,this.alertService.getAlertByHospital(1).pipe(Object(p.a)(this.unsubscribe$)).subscribe(t=>{this.loadingTable=!1,this.dataSourceAlert.data=t.map(t=>new d(t))})}}return t.\u0275fac=function(e){return new(e||t)(f.Wb(u.d),f.Wb(y),f.Wb(D.a),f.Wb(k.a))},t.\u0275cmp=f.Qb({type:t,selectors:[["nvs-list-alert"]],viewQuery:function(t,e){var c;1&t&&(f.Hc(L,!0),f.Hc(I,!0)),2&t&&(f.Ac(c=f.lc())&&(e.paginatorAlert=c.first),f.Ac(c=f.lc())&&(e.sortAlert=c.first))},decls:11,vars:5,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"header"],[1,"content"],[4,"ngIf","ngIfElse"],[1,"border-paginator-table",3,"hidden","pageSizeOptions"],["paginatorAlert",""],["tableAlert",""],[1,"col-md-4"],[1,"input-group"],[1,"input-group-addon"],[1,"fa","fa-search"],["placeholder","Buscar...","type","text",1,"form-control",3,"keyup"],[1,"col-md-8","text-right"],[1,"btn","btn-primary","btn-fill","btn-wd",3,"click"],[1,"table-responsive"],["matSort","",1,"mat-elevation-z0",3,"dataSource"],["sortAlert","matSort"],["matColumnDef","item"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","jobTitle"],["matColumnDef","phone"],["matColumnDef","ventilatorId"],["matColumnDef","action"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","footer-nodata-table",4,"ngIf"],["mat-sort-header",""],[1,"btn","btn-primary","btn-fill",3,"click"],[1,"btn","btn-danger","btn-fill",3,"click"],[1,"footer-nodata-table"]],template:function(t,e){if(1&t&&(f.cc(0,"div",0),f.cc(1,"div",1),f.cc(2,"div",2),f.cc(3,"div",3),f.Lc(4,"Listado Alarmas"),f.bc(),f.cc(5,"div",4),f.Jc(6,N,2,0,"ng-container",5),f.Xb(7,"mat-paginator",6,7),f.bc(),f.bc(),f.bc(),f.bc(),f.Jc(9,H,36,4,"ng-template",null,8,f.Kc)),2&t){const t=f.Bc(10);f.Kb(6),f.uc("ngIf",e.loadingTable)("ngIfElse",t),f.Kb(1),f.uc("hidden",e.dataSourceAlert&&e.dataSourceAlert.data&&0===e.dataSourceAlert.data.length)("pageSizeOptions",f.xc(4,Z))}},directives:[i.m,o.a,n.j,s.a,n.c,n.e,n.b,n.g,n.i,n.d,s.b,n.a,n.f,n.h],encapsulation:2}),t})();var U=c("kmnG"),z=c("d3UM"),G=c("Wp6s"),Q=c("qFsG"),q=c("FKr1");function Y(t,e){if(1&t&&(f.cc(0,"mat-option",14),f.Lc(1),f.bc()),2&t){const t=e.$implicit;f.uc("value",t.workerId),f.Kb(1),f.Mc(t.workerName)}}function tt(t,e){if(1&t){const t=f.dc();f.cc(0,"mat-option",15),f.kc("onSelectionChange",(function(e){return f.Dc(t),f.oc().onChangeVentilator(e)})),f.Lc(1),f.bc()}if(2&t){const t=e.$implicit;f.uc("value",t.ventilatorId),f.Kb(1),f.Mc(t.ventilatorName)}}let et=(()=>{class t{constructor(t,e,c){this.activeRouter=t,this.titleNavbarService=e,this.alertService=c,this.loadingButton=!1,this.users=[],this.ventilator=null,this.unsubscribe$=new h.a}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnInit(){this.titleNavbarService.setTitleNavbar("Alertas"),this.configDropDownList(),this.listenerRouter()}getValueSelectedWorker(t){let e="";return t&&t.length>0&&(e=this.listWorker.find(e=>e.workerId===t[0]).workerName,t&&t.length>1&&(e+=` +${t.length-1} ${2===(null==t?void 0:t.length)?"trabajador":"trabajadores"}`)),e}listenerRouter(){this.activeRouter.url.pipe(Object(p.a)(this.unsubscribe$)).subscribe(t=>{"detalle"===t[0].path?(this.title="Detalle de Alerta",this.textButton="Modificar"):(this.title="Nueva alerta",this.textButton="Crear")})}onChangeVentilator(t){this.ventilator=t.source.value,this.ventilator&&this.alertService.getDetailShortByVentilatorId(this.ventilator).pipe(Object(p.a)(this.unsubscribe$)).subscribe(t=>{this.showDetailVentilator=t?{bed:t.cama,patient:t.paciente,room:t.sala}:null})}onSaveAlert(){this.loadingButton||(this.loadingButton=!0,setTimeout(()=>{this.loadingButton=!1},2e3))}configDropDownList(){this.alertService.getEmployeeAndVentilator(1).pipe(Object(p.a)(this.unsubscribe$)).subscribe(t=>{t&&(this.listVentilator=t.ventilator,this.listWorker=t.worker)})}trackByFn(t,e){return t}}return t.\u0275fac=function(e){return new(e||t)(f.Wb(u.a),f.Wb(D.a),f.Wb(y))},t.\u0275cmp=f.Qb({type:t,selectors:[["nvs-create-detail-alert"]],decls:45,vars:16,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"header"],[1,"content"],[1,"col-md-6"],["appearance","outline",1,"col-md-12"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value","onSelectionChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mat-elevation-z0","outline","full-width"],["matInput","","readonly","",3,"ngModel"],["mat-raised-button","","color","primary",1,"btn","btn-primary","btn-fill","pull-right",3,"disabled","click"],[1,"clearfix"],[3,"value"],[3,"value","onSelectionChange"]],template:function(t,e){1&t&&(f.cc(0,"div",0),f.cc(1,"div",1),f.cc(2,"div",2),f.cc(3,"div",3),f.Lc(4),f.bc(),f.cc(5,"div",4),f.cc(6,"div",0),f.cc(7,"div",5),f.cc(8,"div",0),f.cc(9,"mat-form-field",6),f.cc(10,"mat-label"),f.Lc(11,"Seleccinar un usuario"),f.bc(),f.cc(12,"mat-select",7),f.kc("ngModelChange",(function(t){return e.users=t})),f.cc(13,"mat-select-trigger"),f.Lc(14),f.bc(),f.Jc(15,Y,2,2,"mat-option",8),f.bc(),f.bc(),f.bc(),f.cc(16,"div",0),f.cc(17,"mat-form-field",6),f.cc(18,"mat-label"),f.Lc(19,"Selecciona un ventilador"),f.bc(),f.cc(20,"mat-select"),f.Jc(21,tt,2,2,"mat-option",9),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(22,"div",5),f.cc(23,"mat-card",10),f.cc(24,"mat-card-header"),f.cc(25,"mat-card-title"),f.Lc(26,"Previsualizar datos del Ventilador"),f.bc(),f.bc(),f.cc(27,"mat-card-content"),f.cc(28,"mat-form-field",6),f.cc(29,"mat-label"),f.Lc(30,"Paciente"),f.bc(),f.Xb(31,"input",11),f.bc(),f.cc(32,"mat-form-field",6),f.cc(33,"mat-label"),f.Lc(34,"Sala"),f.bc(),f.Xb(35,"input",11),f.bc(),f.cc(36,"mat-form-field",6),f.cc(37,"mat-label"),f.Lc(38,"Cama"),f.bc(),f.Xb(39,"input",11),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(40,"div",0),f.cc(41,"div",1),f.cc(42,"button",12),f.kc("click",(function(){return e.onSaveAlert()})),f.Lc(43),f.bc(),f.Xb(44,"div",13),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc()),2&t&&(f.Kb(4),f.Mc(e.title),f.Kb(8),f.uc("ngModel",e.users),f.Kb(2),f.Nc(" ",e.getValueSelectedWorker(e.users)," "),f.Kb(1),f.uc("ngForOf",e.listWorker)("ngForTrackBy",e.trackByFn),f.Kb(6),f.uc("ngForOf",e.listVentilator)("ngForTrackBy",e.trackByFn),f.Kb(10),f.uc("ngModel",null==e.showDetailVentilator?null:e.showDetailVentilator.patient),f.Kb(4),f.uc("ngModel",null==e.showDetailVentilator?null:e.showDetailVentilator.room),f.Kb(4),f.uc("ngModel",null==e.showDetailVentilator?null:e.showDetailVentilator.bed),f.Kb(2),f.Ic("margin-top",15,"px"),f.Kb(1),f.Ob("spinner",e.loadingButton),f.uc("disabled",e.loadingButton),f.Kb(1),f.Nc(" ",e.textButton," "))},directives:[U.c,U.f,z.a,r.n,r.q,l.k,l.j,z.c,i.l,G.a,G.d,G.f,G.c,Q.a,r.c,q.h],styles:[".full-width[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;box-sizing:border-box}"]}),t})();const ct=[{path:"",component:P},{path:"detalle",component:et},{path:"crear",component:et}];let at=(()=>{class t{}return t.\u0275mod=f.Ub({type:t}),t.\u0275inj=f.Tb({factory:function(e){return new(e||t)},imports:[[u.g.forChild(ct)],u.g]}),t})(),rt=(()=>{class t{}return t.\u0275mod=f.Ub({type:t}),t.\u0275inj=f.Tb({factory:function(e){return new(e||t)},providers:[y],imports:[[v.b]]}),t})(),lt=(()=>{class t{}return t.\u0275mod=f.Ub({type:t}),t.\u0275inj=f.Tb({factory:function(e){return new(e||t)},providers:[{provide:U.b,useValue:{appearance:"fill"}}],imports:[[rt,a.a,r.i,r.r,l.c,i.c,at,n.l,o.b,s.c,z.b,G.e,Q.b],at,rt]}),t})()}}]);